Frontend Architecture Implementation Plan
Overview
This plan implements the features outlined in 
FRONTEND_ARCHITECTURE_PROPOSAL.md
, verified against actual backend capabilities. All proposed features have confirmed backend API support.

Backend API Verification Summary
Feature	Backend Route	Status
Financial Ledger	GET /project/:projectId/ledger	✅ Supported
Ledger Adjustments	POST /project/:projectId/ledger/adjust	✅ Manager-only
Owner Analytics	GET /owner/analytics/overview, GET .../project/:id	✅ Supported
Manager Analytics	GET /manager/analytics/overview, GET .../project/:id	✅ Supported
Owner Audit Logs	GET /owner/audits?...filters	✅ With pagination
Manager Audit Logs	GET /manager/audits?...filters	✅ Project-scoped
Delay Tracking	
delay.service.js
✅ Per-project
AI Insights	
ai.service.js
⚠️ Placeholder only
CAUTION

AI Service: Currently uses placeholder implementations. The 
extractMaterialsFromDPR()
 and 
generateDelaySummary()
 functions require AI provider configuration (OpenAI/Gemini/HuggingFace) before they return meaningful data. Do not expose AI features in the UI until a provider is configured.

Proposed Changes
Phase 1: New API Clients & Types
Add missing API clients for ledger, analytics, and audit functionality.

[NEW] 
analytics.ts
New file for analytics API client:

// Types: OwnerOverview, ProjectAnalytics, ManagerOverview
// Functions:
// - ownerAnalytics.getOverview()
// - ownerAnalytics.getProjectAnalytics(projectId)
// - managerAnalytics.getOverview()
// - managerAnalytics.getProjectAnalytics(projectId)
[NEW] 
ledger.ts
New file for ledger API client:

// Types: LedgerEntry, LedgerFilters, LedgerResponse
// Functions:
// - projectLedger.get(projectId, filters)
// - projectLedger.addAdjustment(projectId, data)
[NEW] 
audit.ts
New file for audit API client:

// Types: AuditLog, AuditFilters, AuditResponse
// Functions:
// - ownerAudit.getLogs(filters)
// - managerAudit.getLogs(filters)
[NEW] 
types/analytics.ts
TypeScript types based on backend response structures.

[NEW] 
types/ledger.ts
TypeScript types for ledger entries.

Phase 2: Shared UI Components
[NEW] 
BlueprintBackground.tsx
Reusable component to normalize grid + glow orb backgrounds across auth and dashboard layouts.

// Props: variant = 'auth' | 'dashboard'
// - auth: more intense opacity (0.08/0.15)
// - dashboard: subtle opacity (0.04/0.08)
[MODIFY] 
layout.tsx
Replace inline grid/orb JSX with <BlueprintBackground variant="auth" />.

[MODIFY] 
layout.tsx
Replace inline grid/orb JSX with <BlueprintBackground variant="dashboard" />.

Phase 3: Feature Pages (Owner)
[NEW] 
page.tsx
Financial Ledger page:

Uses Shadcn DataTable component
Date range filter via DateRangePicker
Type filter (MATERIAL | WAGE | ADJUSTMENT)
Pagination
Shows running totals
[NEW] 
page.tsx
Audit Log viewer page:

Filterable by project, category, date range
Paginated table
Shows entity changes (before/after diff)
[MODIFY] 
page.tsx
Enhance dashboard to consume 
getOwnerOverview()
 from analytics service:

Add Budget vs Invested visualization
Add delayed projects count
Add material/wages breakdown
Phase 4: Feature Pages (Manager)
[NEW] 
page.tsx
Project-specific ledger for managers with ability to add adjustments.

[NEW] 
page.tsx
Project-scoped audit logs for managers.

Phase 5: Sidebar & Navigation
[MODIFY] 
DashboardSidebar.tsx
Add new navigation items:

Owner: Ledger, Audit, Analytics (enhance existing)
Manager: Ledger, Audit
Add SidebarTrigger component for mobile/desktop collapse toggle.

Folder Changes Required
IMPORTANT

Please create these folders before implementation:

frontend/
├── types/                          # [NEW] Create if not exists
│   ├── analytics.ts
│   └── ledger.ts
├── app/(dashboard)/owner/
│   ├── ledger/                     # [NEW]
│   │   └── page.tsx
│   └── audit/                      # [NEW]
│       └── page.tsx
├── app/(dashboard)/manager/
│   ├── ledger/                     # [NEW]
│   │   └── page.tsx
│   └── audit/                      # [NEW]
│       └── page.tsx
Out of Scope (per user constraint)
Labour and Site Engineer web interfaces
AI Insights UI (backend is placeholder-only)
DiceUI Task Management (priority logic pending in backend)
Verification Plan
Manual Verification (User Required)
Since the backend requires authentication with real user sessions, the primary verification method is manual testing:

API Client Testing

After creating API clients, use browser DevTools Network tab to verify:
GET /owner/analytics/overview returns data when logged in as owner
GET /project/:id/ledger returns ledger entries for a valid project
GET /owner/audits returns audit log array with pagination
UI Component Testing

Navigate to /owner/ledger and verify:
Table renders with correct columns (Date, Type, Description, Amount, Running Total)
Date filter changes results
Pagination works (if >100 entries exist)
Navigate to /owner/audit and verify:
Logs display with category badges
Filtering by project works
Layout Normalization Testing

Compare auth layout (/login) and dashboard layout (/owner)
Verify grid pattern and glow orbs are visually consistent
Build Verification (Automated)
Run the following command to verify no TypeScript/build errors:

cd d:\NextJs_SHIT\bharatbuild\frontend
npm run build
This ensures:

All new types are correctly defined
All imports resolve
No runtime errors in static analysis
Implementation Order
Phase 1: API clients and types (foundation)
Phase 2: BlueprintBackground component (quick win, reduces duplication)
Phase 3: Owner ledger and audit pages
Phase 4: Manager ledger and audit pages
Phase 5: Sidebar updates
Questions for User
Do you want me to implement all phases, or prioritize specific ones?
Should I include the DateRangePicker component from scratch or use an existing library like react-day-picker?
For the DataTable component, do you already have a version in components/ui/ or should I create it using shadcn's table primitive?